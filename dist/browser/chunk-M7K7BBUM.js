import{a as D}from"./chunk-CIZ26C6N.js";import{$ as g,B as _,C as v,F as C,H as p,I as s,La as T,Ma as q,P as y,Pa as k,Qa as L,R as N,Ra as O,Ta as $,U as E,Ua as z,W as S,X as x,Y as c,Z as a,_ as d,ea as I,fa as l,ga as F,ha as R,ma as m,na as M,oa as b,pa as w,ra as V,u as f,ua as P,xa as A,y as u,z as h,za as U}from"./chunk-KYEOUCTL.js";var Z=(i,e)=>e.id;function ee(i,e){}function te(i,e){if(i&1){let r=g();c(0,"div")(1,"button",5),I("click",function(){_(r);let t=l(2);return v(t.sendFriendRequest(t.user))}),m(2," Accept Friendship "),a()()}}function ie(i,e){if(i&1){let r=g();c(0,"div")(1,"button",5),I("click",function(){_(r);let t=l(2);return v(t.friendshipService.sendFriendshipRequest(t.user))}),m(2," Add Friend "),a()()}}function ne(i,e){if(i&1){let r=g();c(0,"div")(1,"button",5),I("click",function(){_(r);let t=l(2);return v(t.friendshipService.sendFriendshipRequest(t.user))}),m(2),a()()}if(i&2){let r=l(2);p(2),M(" ",r.friendshipStatus," ")}}function re(i,e){i&1&&(c(0,"div")(1,"h2"),m(2,"Your profile page!"),a()())}function oe(i,e){if(i&1&&d(0,"app-post",6),i&2){let r=e.$implicit;N("post",r)}}function se(i,e){if(i&1&&(y(0,ee,0,0)(1,te,3,0)(2,ie,3,0)(3,ne,3,1)(4,re,3,0),c(5,"div",1)(6,"div",2)(7,"div")(8,"h1"),m(9),a(),d(10,"img",3),a()(),c(11,"div",2)(12,"div",4),S(13,oe,1,1,"app-post",6,Z),a()()()),i&2){let r=l();E(0,r.tokensService.accessToken==null?0:r.friendshipStatus=="RECEIVED"?1:r.friendshipStatus=="NONE"?2:r.friendshipStatus!="SAMEPERSON"?3:4),p(9),b("",r.user.firstName," ",r.user.lastName,""),p(),F("src",r.imageService.getImageElement(r.user.profileImage),C),p(3),x(r.posts)}}function ae(i,e){i&1&&d(0,"app-loading-page")}var B=(()=>{let e=class e{constructor(n,t,o,H,J,K){this.friendshipService=n,this.userService=t,this.activatedRoute=o,this.postService=H,this.tokensService=J,this.imageService=K,this.user=null,this.posts=[],this.friendshipStatus="none"}sendFriendRequest(n){this.friendshipService.sendFriendshipRequest(n).subscribe(t=>{console.log(t)})}findUserAndFriendshipStatus(n){console.log("findUserAndFriendshipStatus"),this.userService.findById(n).subscribe(t=>{this.user=t,this.friendshipService.checkFriendshipStatus(this.user).subscribe(o=>{this.friendshipStatus=o})})}ngOnInit(){let n=this.activatedRoute.snapshot.paramMap.get("id");if(n==null)return;let t=Number.parseInt(n);this.postService.getPostsByUserId(t).subscribe(o=>{this.posts=o}),this.findUserAndFriendshipStatus(t)}};e.\u0275fac=function(t){return new(t||e)(s($),s(T),s(P),s(L),s(O),s(k))},e.\u0275cmp=u({type:e,selectors:[["app-user-profile"]],standalone:!0,features:[w],decls:2,vars:1,consts:[["class","row"],[1,"row"],[1,"col"],["width","200px","height","200px","alt","profile image",3,"src"],["id","content"],[3,"click"],[3,"post"]],template:function(t,o){t&1&&y(0,se,15,4,"div",0)(1,ae,1,0),t&2&&E(0,o.user!=null?0:1)},dependencies:[q,D]});let i=e;return i})();var ce=(i,e)=>e.id;function pe(i,e){if(i&1&&(d(0,"img",1),c(1,"a",2),m(2),a()),i&2){let r=e.$implicit,n=l();F("src",n.imageService.getImageElement(r.profileImage),C),p(),R("routerLink","/user/profile/",r.id,""),p(),b("",r.firstName," ",r.lastName,"")}}var Y=(()=>{let e=class e{constructor(n,t,o){this.userService=n,this.route=t,this.imageService=o,this.users=[]}ngOnInit(){this.route.params.subscribe(n=>{let t=n.id;typeof t=="string"&&this.performSearch(t)})}performSearch(n){this.userService.search(n).subscribe(t=>{this.users=t,console.log(t)})}};e.\u0275fac=function(t){return new(t||e)(s(T),s(P),s(k))},e.\u0275cmp=u({type:e,selectors:[["app-search"]],standalone:!0,features:[w],decls:3,vars:0,consts:[["id","content"],["alt","user-profile-image","width","50px","height","50px",3,"src"],["id","name",3,"routerLink"]],template:function(t,o){t&1&&(c(0,"div",0),S(1,pe,3,4,null,null,ce),a()),t&2&&(p(),x(o.users))},dependencies:[A]});let i=e;return i})();var le=[{path:"profile/:id",component:B},{path:"search/:id",component:Y}],G=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h({type:e}),e.\u0275inj=f({imports:[U.forChild(le),U]});let i=e;return i})();var Pe=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h({type:e}),e.\u0275inj=f({imports:[V,z,G]});let i=e;return i})();export{Pe as UsersModule};
